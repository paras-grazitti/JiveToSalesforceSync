!function(t){var e=function(e,a){for(var n in a){var d=t("<div>").addClass("form-group").addClass("fieldSection"),s=t("<label>").addClass("col-sm-2").addClass("control-label").text(a[n].name||n);a[n].required&&s.append(t("<span>").css("color","#f00").text("*"));var r,i=t("<div>").addClass("col-sm-8");if("textarea"===a[n].type)r=t("<textarea>").attr("rows","3").attr("maxlength",a[n].maxlength||"32000");else if("select"===a[n].type){var p=t("<select>");p.append(t("<option>").attr("value","").text("--select--"));for(var l in a[n].options)p.append(t("<option>").attr("value",l).text(a[n].options[l].name||l));r=p}else r="date"===a[n].type||"Date"===a[n].type?t("<input />").attr("type","text").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}):"file"===a[n].type?t("<input />").attr("type","file").attr("onchange","previewFile()"):"email"===a[n].type?t("<input />").attr("type","text").data("pattern",/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}/):t("<input />").attr("type","text").attr("maxlength",a[n].maxlength||"255").attr("placeholder",a[n].placeholder||"");r.addClass("form-control").attr("id","sfdc_case_"+n.split(" ").join("_")).attr("isDependent",a[n].isDependent?"yes":"no").attr("isRequired",a[n].required?"yes":"no"),a[n].id&&null!==a[n].id&&""!==a[n].id&&r.attr("id",a[n].id),null!==a[n].sfApi&&""!==a[n].sfApi?r.attr("name",a[n].sfApi):r.attr("name","sfdc_case_"+n.split(" ").join("_")),a[n].pattern&&null!==a[n].pattern&&""!==a[n].pattern&&r.data("pattern",new RegExp(a[n].pattern)),i.append(r),a[n].hint&&i.append(t("<small>").addClass("help-block").text(a[n].hint)),a[n].isDependent&&!function(e,a,n){e.find(".form-control").change(function(){n[t(this).val()]?a.appendField(n[t(this).val()].actionFields):a.appendField({})})}(i,d,a[n].options),e.append(d.append(s).append(i))}};t.fn.appendField=function(a){var n=t.extend({},a),d=t("<div>").attr("appended","yes");return e(d,n),this.next("[appended=yes]").slideUp(function(){this.remove()}),d.hide(),this.after(d),d.slideDown(function(){gadgets.window.adjustHeight()}),this},t.fn.createForm=function(a,n){var d=t.extend({},a),s=t("<form>").addClass("form-horizontal").addClass("case_create_form").css("width","100%").css("height","auto");return e(s,d),s.append(t("<div>").addClass("form-group").addClass("fieldSection").append(t("<label>").addClass("col-sm-2").addClass("control-label")).append(t("<div>").addClass("col-sm-8").addClass("align-form-btn").append(t("<input />").addClass("crm-btn").attr("id","g_sfdc_jive_save").attr("type","submit").val("submit")).append(t("<input />").addClass("crm-btn").attr("id","g_sfdc_jive_cancel").attr("type","button").val("Cancel")))),s.submit(function(e){var a=t(this).serializeArray(),d=!0;if(t(this).find("[isRequired=yes]").each(function(e,a){var n=t(a).val();null===n||""===n||t(a).data("pattern")&&!t(a).data("pattern").test(n)?(t(a).parents(".form-group").addClass("has-error"),d=!1):t(a).parents(".form-group").removeClass("has-error")}),d){var s={};a.forEach(function(t){s[t.name]=t.value}),"function"==typeof n&&n(s)}return!1}),this.empty().append(s)}}(jQuery);